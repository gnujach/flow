import{I as S,A as M}from"./AppLayout-DXxu7OZx.js";import{J as k}from"./NavLink-DlpnTRhW.js";import{P as N}from"./Pagination-DRsZvoig.js";import{e as l,o,a as e,v as B,p as b,b as r,m as c,s as V,w as m,t as p,F as A,h as E,n as $,f as _,y as C,x as U,c as h}from"./app-C7InNpMe.js";import{r as q}from"./PencilIcon-BvFkzvcb.js";import{r as z}from"./CheckIcon-DShOUjVB.js";import{Y as L,h as j,_ as O,S as P}from"./transition-fHm7tQel.js";import{_ as R}from"./AlertToast-D-OpMpZ3.js";import{V as T}from"./vue-good-table-next-Yo8_Z7Cu.js";import"./ResponsiveNavLink-BJaFqWiP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-DAS5haSk.js";import"./use-resolve-button-type-0gOLkSFA.js";import"./open-closed-B6b92wWp.js";/* empty css            */function D(v,x){return o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l6.22-6.22a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 1 1 1.06-1.06l6.22 6.22V3a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function F(v,x){return o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const H={class:"flex items-center justify-center"},I={class:"flex flex-col overflow-hidden w-full max-w-2xl bg-white rounded-lg mx-4 max-h-[80vh] mt-[10vh] relative"},J={class:"flex flex-row justify-between items-center border-b border-gray-300"},Y={class:"inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},Z={class:"mb-2 text-lg font-bold uppercase"},G={class:"overflow-auto"},K={class:"px-4 py-16 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-10"},Q={class:"grid gap-4 row-gap-4 lg:grid-cols-2"},W={class:"lg:py-6 lg:pr-16"},X={class:"flex flex-col items-center mr-4"},ee={class:"pt-1 pb-8 flex flex-row justify-around"},te=["onClick"],se={class:"flex"},oe={class:"flex flex-col items-center mr-4"},ae={class:"flex items-center justify-center w-10 h-10 border rounded-full"},le={class:"pt-1 flex justify-between"},ie={class:"relative"},re={class:"grid grid-rows-2 grid-cols-1"},de={key:0,class:"uppercase indent-2 text-lg text-gray-600 italic"},ne={key:1,class:"uppercase indent-2 text-lg text-gray-600 italic"},ce={__name:"ModalUpdateSolicitud",props:{uuid:{type:Number,required:!0}},setup(v){const x=B(),u=b(!1),d=b(null),s=b(0),i=b({task_id:100,concluido:!1}),a=async f=>{try{const t=await C.get(`/solicitudes/${f}/edit`);d.value=t.data,s.value=d.value.historysolicitud[d.value.historysolicitud.length-1]}catch(t){console.log(t)}u.value=!0},g=async(f,t,n)=>{i.value.task_id=t,i.value.concluido=n,u.value=!1;try{await C.put(`/solicitudes/${f}/update/`,{data:i.value,_method:"put"}),x.dispatch("solicitudesStore/openModalUpdateRequest")}catch(y){console.log(y)}},w=()=>{u.value=!1};return(f,t)=>(o(),l("div",H,[e("button",V(f.$attrs,{type:"button",onClick:t[0]||(t[0]=n=>a(v.uuid)),class:"flex items-center space-x-2 border border-gray-300 shadow-sm px-3 py-1.5 hover:border-gray-600 focus:outline-none focus:border-gray-600 rounded-lg"}),[r(c(q),{class:"flex-none text-blue-800 ml-1 w-5 h-5","aria-hidden":"true"})],16),r(c(P),{show:u.value,as:"template"},{default:m(()=>[r(c(L),{open:u.value,onClose:w,class:"fixed inset-0 z-50 flex justify-center items-start"},{default:m(()=>[r(c(j),{enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:m(()=>[r(c(O),{class:"fixed inset-0 bg-black bg-opacity-75"})]),_:1}),r(c(j),{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:m(()=>[e("div",I,[e("div",J,[e("div",Y,[e("p",Z,p(d.value.cliente.full_name)+"/ "+p(d.value.tramite.nombre),1)]),e("div",{class:"inset-y-0 right-0 flex items-center pr-3 my-2"},[e("button",{onClick:w,type:"button",class:"flex items-center p-1.5 uppercase font-semibold tracking-wider text-gray-700 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"}," Esc ")])]),e("div",G,[e("div",K,[e("div",Q,[e("div",W,[(o(!0),l(A,null,E(d.value.tramite.tareastramite,n=>(o(),l("div",{class:"flex",key:n.id},[e("div",X,[e("div",null,[e("div",{class:$(["flex items-center justify-center w-10 h-10 border rounded-full",[n.id<=s.value.task_id?"bg-gray-400":""]])},[r(c(D),{class:"h-5 w-5"})],2)]),t[2]||(t[2]=e("div",{class:"w-px h-full bg-gray-300"},null,-1))]),e("div",ee,[e("p",{class:$(["mb-2 text-lg font-bold",[n.id<=s.value.task_id?"line-through text-gray-300":""]])},p(n.nombre),3),n.id>s.value.task_id?(o(),l("button",{key:0,onClick:y=>g(d.value.id,n.id,!1)},[...t[3]||(t[3]=[e("strong",{class:"border text-blue-500 border-current uppercase px-2 py-1.5 rounded-full text-[7px] tracking-wide hover:bg-blue-900 hover:text-white"}," Completada ",-1)])],8,te)):_("",!0)])]))),128)),e("div",se,[e("div",oe,[e("div",null,[e("div",ae,[r(c(z),{class:"h-5 w-5"})])])]),e("div",le,[t[5]||(t[5]=e("p",{class:"mb-2 text-lg font-bold"},"Trámite Concluído",-1)),e("button",{onClick:t[1]||(t[1]=n=>g(d.value.id,f.id=100,f.concluida=!0))},[...t[4]||(t[4]=[e("strong",{class:"border text-blue-500 border-current uppercase px-2 py-1.5 rounded-full text-[7px] tracking-wide hover:bg-blue-900 hover:text-white"}," Completada ",-1)])])])])]),e("div",ie,[e("div",re,[t[6]||(t[6]=e("div",{class:"border-b border-blue-500"},[e("h3",{class:"text-center"}," Observaciones")],-1)),e("div",null,[d.value.nota?(o(),l("p",de,p(d.value.nota),1)):(o(),l("p",ne,"No se tienen observaciones"))])])])])])])])]),_:1})]),_:1},8,["open"])]),_:1},8,["show"])]))}},ue={class:"py-12"},me={class:"max-w-full mx-auto sm:px-6 lg:px-8"},fe={class:"overflow-hidden shadow-xl sm:rounded-lg"},pe={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},ve={class:"mt-8 flex flex-row m-2 justify-between"},be={class:"flex flex-row justify-end pb-4"},xe={class:"flex justify-end"},_e={class:"border-green-700 border bg-white rounded mr-4 w-32 mb:w-42 p-1 hover:bg-aqua transition duration-500"},he={class:"flex flex-row"},ge={key:0,class:"flex justify-center"},we={href:"/solicitudes/export/"},ye={class:"border-green-700 border bg-white rounded mr-4 w-32 mb:w-42 p-1 hover:bg-aqua transition duration-500"},ke={class:"flex flex-row justify-between"},$e={class:"font-bold text-blue-500 hover:underline capitalize"},Ce={key:1,class:"p-1.5 text-xs font-thin text-green-800 bg-green-200 rounded-lg bg-opacity-50 truncate"},je={key:2},Se={key:3},Me={key:0},Ne={key:1},Be={key:4},Ve={class:"max-w-3xl mx-auto sm:px-6 lg:px-8 pt-4"},Ye={__name:"ListSolicitudes",props:{solicitudes:Object},setup(v){const x=v,u=b([]);U(()=>{x.solicitudes.data.solicitudes.forEach(s=>{let i={id:s.data.id,user:s.data.user.data.attributes.name,created_at:s.data.attributes.created,cliente:s.data.cliente.data.attributes.full_name,cliente_uuid:s.data.cliente.data.uuid,tramite:s.data.tramite.data.attributes.nombre,departamento:s.data.tramite.data.departamento.data.attributes.nombre,m_atencion:s.data.medio.data.attributes.nombre,concluida:s.data.attributes.concluido};u.value.push(i)})});const d=b([{label:"Realizado",field:"created_at"},{label:"Atendió",field:"user"},{label:"Usuario",field:"cliente"},{label:"Departamento",field:"departamento"},{label:"Trámite",field:"tramite"},{label:"Medio de atención",field:"m_atencion"},{label:"Concluída",field:"concluida"},{label:"Acciones",field:"acciones",sortable:!1}]);return(s,i)=>(o(),h(M,null,{header:m(()=>[i[3]||(i[3]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Solicitudes ",-1)),e("div",ue,[e("div",me,[e("div",fe,[e("div",pe,[r(R),e("div",ve,[i[2]||(i[2]=e("p",{class:"text-2xl ml-4 w-1/2"}," Solicitudes por usuario ",-1)),e("div",be,[e("div",xe,[r(k,{href:s.route("solicitudes",{})},{default:m(()=>[e("button",_e,[e("div",he,[r(S,{name:"plus",class:"block w-6 h-6 fill-gray-400"}),i[0]||(i[0]=e("p",{class:"font-bold"}," Nueva Solicitud ",-1))])])]),_:1},8,["href"])]),s.$page.props.auth.roles.includes("Supervisor")||s.$page.props.auth.roles.includes("Admin")?(o(),l("div",ge,[e("a",we,[e("button",ye,[e("div",ke,[r(c(F),{class:"h-5 w-5"}),i[1]||(i[1]=e("p",{class:"font-bold"}," Excel ",-1))])])])])):_("",!0)])]),e("div",null,[r(c(T),{columns:d.value,rows:u.value,"search-options":{enabled:!0,placeholder:"Buscar en tabla"}},{"table-row":m(a=>[a.column.field=="cliente"?(o(),h(k,{key:0,href:s.route("admin.clientes/show",{cliente:a.row.cliente_uuid})},{default:m(()=>[e("p",$e,p(a.row.cliente),1)]),_:2},1032,["href"])):a.column.field=="m_atencion"?(o(),l("span",Ce,p(a.row.m_atencion),1)):a.column.field=="acciones"?(o(),l("div",je,[a.row.concluida==!1?(o(),h(ce,{key:0,uuid:a.row.id},null,8,["uuid"])):_("",!0)])):a.column.field=="concluida"?(o(),l("div",Se,[a.row.concluida==!1?(o(),l("span",Me," No ")):a.row.concluida==!0?(o(),l("span",Ne," Si ")):_("",!0)])):(o(),l("span",Be,p(a.formattedRow[a.column.field]),1))]),_:1},8,["columns","rows"])]),e("div",Ve,[r(N,{meta:v.solicitudes.meta},null,8,["meta"])])])])])])]),_:1}))}};export{Ye as default};
