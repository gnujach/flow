import{I as f,A as E}from"./AppLayout-DvZhDYGv.js";import{J as S}from"./NavLink-C3AtBab6.js";import{P as N}from"./Pagination-BeRPbXgi.js";import{r as v,e as h,o as d,a as e,b as s,t as c,p as O,w as u,i as $,f as T,F as K,h as P,n as L,q as B,s as V,k as R,v as A,x as j,y as q,z,A as G,B as F,C as J,c as I,g as y,m as w}from"./app-CArJwsA3.js";import{r as Y,l as H}from"./lodash-C8Y5UCqI.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as W,S as X,_ as Z,Y as ee,r as te}from"./transition-DvF6H_Oy.js";import{_ as se}from"./Breadcrumb-d2dfjcg6.js";import{r as oe}from"./Bars4Icon-vaXHGUq3.js";import{r as ne}from"./PencilIcon-C1YvNYww.js";import{r as ae}from"./ExclamationCircleIcon-DOMyILkW.js";import{r as re}from"./CheckBadgeIcon-cj5q-mO0.js";import"./ResponsiveNavLink-Re4XPsQJ.js";import"./keyboard-DJJQ75-z.js";import"./use-resolve-button-type-ty-xYOe2.js";import"./open-closed-B45GE6EM.js";import"./ChevronRightIcon-Bnm1pgsz.js";const le={components:{MagnifyingGlassIcon:te,UserPlusIcon:Y,Dialog:ee,DialogOverlay:Z,TransitionRoot:X,TransitionChild:W,JetNavLink:S},setup(m,a){const _=B(),t=()=>{var p;const l=((p=navigator==null?void 0:navigator.userAgentData)==null?void 0:p.platform)||(navigator==null?void 0:navigator.platform)||"unknown";return/(Mac|iPhone|iPod|iPad)/i.test(l)};V(()=>{window.addEventListener("keydown",r),console.log("mounted")});const g=t()?"⌘K":"Ctrl+K",n=R(()=>_.getters["solicitudesStore/getSearchCreate"]),o=A([]),k=A([]),i=A(0),C=H.debounce(async l=>{let p=await j.get("/admin/clientes/search/",{params:{term:l}});o.value=p.data,await q(),k.value=[]},250),M=l=>{["ArrowUp","ArrowDown","Enter"].includes(l.code)&&l.preventDefault()},U=l=>{var p;switch(l.code){case"ArrowDown":i.value===o.value.length-1?i.value=0:i.value+=1;break;case"ArrowUp":i.value===0?i.value=o.value.length-1:i.value-=1;break;case"Enter":D(o.value[i.value]);break}(p=k.value[i.value])==null||p.scrollIntoView(!1)},r=l=>{n.value||(l.metaKey||l.ctrlKey)&&l.key==="k"&&(_.dispatch("solicitudesStore/toggleModalSearchUser"),l.preventDefault())},x=()=>{o.value[i.value]&&(window.location=o.value[i.value].url)},b=()=>{_.dispatch("solicitudesStore/toggleModalSearchUser")},D=l=>{b(),F.get("clientes/"+l.uuid+"/show")};return z(()=>window.removeEventListener("keydown",r)),{...G("solicitudesStore",["toggleModalAddUser","selectUsuario","toggleModalSearchUser"]),isOpen:n,navigateResults:U,onTermKeydown:M,results:o,resultsRefs:k,search:C,selectedIndex:i,closeModal:b,keyboardShortcut:g,onSubmit:x,selectUser:D}}},ie={class:"flex items-center justify-center"},de={class:"flex-none text-xs font-semibold text-blue-800"},ce={class:"flex flex-col overflow-hidden w-full max-w-2xl bg-white rounded-lg mx-4 max-h-[80vh] mt-[10vh] relative"},ue={class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},me={class:"absolute inset-y-0 right-0 flex items-center pr-3"},pe={class:"overflow-auto"},fe={key:0,class:"divide-y divide-gray-300"},he=["onMousemove","onClick"],_e={class:"ml-3"},ge={class:"font-semibold text-gray-600"},xe={key:1,class:"p-10 text-lg text-center text-gray-400"};function be(m,a,_,t,g,n){const o=v("MagnifyingGlassIcon"),k=v("DialogOverlay"),i=v("TransitionChild"),C=v("UserPlusIcon"),M=v("Dialog"),U=v("TransitionRoot");return d(),h("div",ie,[e("button",O(m.$attrs,{type:"button",onClick:a[0]||(a[0]=(...r)=>m.toggleModalSearchUser&&m.toggleModalSearchUser(...r)),class:"flex items-center space-x-2 border border-gray-300 shadow-sm px-3 py-1.5 hover:border-gray-600 focus:outline-none focus:border-gray-600 rounded-lg"}),[s(o,{class:"flex-none text-blue-800 -ml-1 w-5 h-5","aria-hidden":"true"}),a[6]||(a[6]=e("span",{class:"text-sm text-blue-800 flex-1 text-left"},"..buscar",-1)),e("span",de,c(t.keyboardShortcut),1)],16),s(U,{show:t.isOpen,as:"template"},{default:u(()=>[s(M,{open:t.isOpen,onClose:t.closeModal,onKeydown:t.navigateResults,class:"fixed inset-0 z-50 flex justify-center items-start"},{default:u(()=>[s(i,{enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:u(()=>[s(k,{class:"fixed inset-0 bg-black bg-opacity-75"})]),_:1}),s(i,{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:u(()=>[e("div",ce,[e("form",{action:"#",class:"relative flex items-center",onSubmit:a[5]||(a[5]=$((...r)=>t.onSubmit&&t.onSubmit(...r),["prevent"]))},[e("div",ue,[s(o,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})]),e("input",{onInput:a[1]||(a[1]=r=>t.search(r.target.value)),onKeydown:a[2]||(a[2]=(...r)=>t.onTermKeydown&&t.onTermKeydown(...r)),type:"text",placeholder:"Buscar",class:"w-full py-4 pl-12 border-b border-gray-100 placeholder-gray-400"},null,32),e("div",me,[e("button",{onClick:a[3]||(a[3]=(...r)=>t.closeModal&&t.closeModal(...r)),type:"button",class:"flex items-center p-1.5 uppercase font-semibold tracking-wider text-gray-700 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"}," Esc "),e("button",{onClick:a[4]||(a[4]=r=>m.toggleModalAddUser()),type:"button",class:"flex items-center p-1.5 uppercase ml-1 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"},[s(C,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})])])],32),e("div",pe,[t.results?(d(),h("ul",fe,[(d(!0),h(K,null,P(t.results,(r,x)=>(d(),h("li",{key:x,ref_for:!0,ref:b=>{t.resultsRefs[x]=b},class:L([t.selectedIndex===x?"italic bg-gray-100":"","flex items-center px-4 py-2.5 relative"]),onMousemove:b=>t.selectedIndex=x,onClick:b=>t.selectUser(r)},[a[7]||(a[7]=e("span",{class:"absolute inset-0"},null,-1)),e("div",_e,[e("div",ge,c(r.nombre)+" "+c(r.apellido1)+" "+c(r.apellido2=="NULL"?"":r.apellido2),1)])],42,he))),128))])):T("",!0),t.results.length===0?(d(),h("p",xe," Sin resultados aún...:( ")):T("",!0)])])]),_:1})]),_:1},8,["open","onClose","onKeydown"])]),_:1},8,["show"])])}const ve=Q(le,[["render",be]]),ye={class:"font-semibold text-xl text-gray-800 leading-tight"},we={class:"py-12"},ke={class:"max-w-full mx-auto sm:px-6 lg:px-8"},Se={class:"overflow-hidden shadow-xl sm:rounded-lg"},Ce={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},Me={class:"mt-8 flex flex-row m-2"},Ue={class:"w-1/2 flex justify-end"},Ae={class:"border-green-700 border bg-white rounded mr-4 w-32 mb:w-42 p-1 hover:bg-aqua transition duration-500"},Ie={class:"flex flex-row"},De={class:"flex justify-start m-4"},Te={class:"bg-white rounded shadow overflow-x-auto ml-4 mr-4"},Ke={class:"w-full"},Pe={class:"text-left font-bold bg-aqua"},Le={class:"px-6 pt-6 pb-4"},Re={class:"flex content-center items-center"},Ee={class:"px-6 pt-6 pb-4"},Ne={class:"flex content-center items-center"},Oe={class:"px-6 pt-6 pb-4"},$e={class:"flex content-center items-center"},Be={class:"px-6 pt-6 pb-4"},Ve={class:"flex content-center items-center"},je={class:"px-6 pt-6 pb-4"},qe={class:"flex content-center items-center"},ze={class:"px-6 pt-6 pb-4"},Ge={class:"flex content-center items-center"},Fe={class:"border-t"},Je={class:"pl-4 font-bold uppercase"},Ye={class:"border-t"},He={class:"pl-4 font-bold uppercase"},Qe={class:"border-t"},We={class:"pl-4 font-bold uppercase"},Xe={class:"border-t"},Ze={class:"pl-4 font-bold"},et={class:"border-t"},tt={class:"pl-4 font-bold"},st={class:"border-t"},ot={class:"flex flex-row items-center text-gray-400 focus-within:text-gray-600"},nt={class:"max-w-3xl mx-auto sm:px-6 lg:px-8 pt-4"},wt={__name:"ListClientes",props:["clientes"],setup(m){const a=R(()=>[{label:"Inicio",url:route("dashboard.list")},{label:"Clientes"}]),_=m,{clientes:t}=J(_);return(g,n)=>(d(),I(E,null,{header:u(()=>[e("h2",ye,[s(se,{items:a.value},null,8,["items"])]),e("div",we,[e("div",ke,[e("div",Se,[e("div",Ce,[e("div",Me,[n[1]||(n[1]=e("p",{class:"text-2xl ml-4 w-1/2"}," Usuarios en el sistema ",-1)),e("div",Ue,[s(S,{href:g.route("admin.clientes/create",{})},{default:u(()=>[e("button",Ae,[e("div",Ie,[s(f,{name:"plus",class:"block w-6 h-6 fill-gray-400"}),n[0]||(n[0]=e("p",{class:"font-bold"}," Agregar Usuario ",-1))])])]),_:1},8,["href"])])]),e("div",De,[s(ve)]),e("div",Te,[e("table",Ke,[e("tr",Pe,[e("th",Le,[e("div",Re,[s(f,{name:"sun",class:"w-8 h-8 mr-2 text-indigo-900"}),n[2]||(n[2]=y(" Nombre ",-1))])]),e("th",Ee,[e("div",Ne,[s(f,{name:"sun",class:"w-8 h-8 mr-2 text-indigo-900"}),n[3]||(n[3]=y(" Apellido 1 ",-1))])]),e("th",Oe,[e("div",$e,[s(f,{name:"sun",class:"w-8 h-8 mr-2 text-indigo-900"}),n[4]||(n[4]=y(" Apellido 2 ",-1))])]),e("th",Be,[e("div",Ve,[s(f,{name:"sun",class:"w-8 h-8 mr-2 text-indigo-900"}),n[5]||(n[5]=y(" Teléfono ",-1))])]),e("th",je,[e("div",qe,[s(f,{name:"sun",class:"w-8 h-8 mr-2 text-indigo-900"}),n[6]||(n[6]=y(" Correo ",-1))])]),e("th",ze,[e("div",Ge,[s(f,{name:"sun",class:"w-8 h-8 mr-2 text-indigo-900"}),n[7]||(n[7]=y(" Acciones ",-1))])])]),(d(!0),h(K,null,P(w(t).data.clientes,o=>(d(),h("tr",{key:o.data.id,class:L(["hover:bg-gray-100 focus-within:bg-gray-100",[o.data.attributes.activo==0?"text-gray-400":""]])},[e("td",Fe,[e("p",Je,c(o.data.attributes.nombre),1)]),e("td",Ye,[e("p",He,c(o.data.attributes.apellido1),1)]),e("td",Qe,[e("p",We,c(o.data.attributes.apellido2),1)]),e("td",Xe,[e("p",Ze,c(o.data.attributes.telefono),1)]),e("td",et,[e("p",tt,c(o.data.attributes.email),1)]),e("td",st,[e("div",ot,[s(S,{href:g.route("admin.clientes/show",{cliente:o.data.uuid})},{default:u(()=>[s(w(oe),{class:"w-5 h-5 ml-3 pointer-events-none"})]),_:1},8,["href"]),s(S,{href:g.route("admin.clientes/edit",{cliente:o.data.uuid})},{default:u(()=>[s(w(ne),{class:"w-5 h-5 ml-3 pointer-events-none"})]),_:1},8,["href"]),o.data.attributes.activo?(d(),I(w(ae),{key:0,class:"w-5 h-5 ml-3 pointer-events-none"})):(d(),I(w(re),{key:1,class:"w-5 h-5 ml-3 pointer-events-none"}))])])],2))),128))])]),e("div",nt,[s(N,{meta:w(t).meta},null,8,["meta"])])])])])])]),_:1}))}};export{wt as default};
