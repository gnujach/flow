import{I as T,A as K}from"./AppLayout-CFemxVNN.js";import{J as _}from"./NavLink-BgQAZ_hQ.js";import{P}from"./Pagination-CgQzrCZd.js";import{e as f,o as u,a as e,r as g,b as r,t as w,s as j,w as d,i as L,f as M,F as R,h as B,n as E,v as O,x as A,k as D,p as h,y as N,z as V,A as $,B as G,C as z,D as F,c as J,m as y}from"./app-CrjSDSZE.js";import{r as Y,l as Z}from"./lodash-CO7xqWmc.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as H,S as Q,_ as W,Y as X,r as ee}from"./transition-BoVLe9KW.js";import{_ as te}from"./Breadcrumb-DwrDChYl.js";import{V as oe}from"./vue-good-table-next-MNZwBVZ3.js";import{r as se}from"./PencilIcon-D7pdEpnM.js";import"./ResponsiveNavLink-BSwcu07n.js";import"./keyboard-D9TTOfHZ.js";import"./use-resolve-button-type-BD1dlrD9.js";import"./open-closed-CLfTu_Kj.js";/* empty css            */import"./ChevronRightIcon-BozZBf0o.js";function ae(c,s){return u(),f("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}const le={components:{MagnifyingGlassIcon:ee,UserPlusIcon:Y,Dialog:X,DialogOverlay:W,TransitionRoot:Q,TransitionChild:H,JetNavLink:_},setup(c,s){const m=O(),t=()=>{const n=navigator?.userAgentData?.platform||navigator?.platform||"unknown";return/(Mac|iPhone|iPod|iPad)/i.test(n)};A(()=>{window.addEventListener("keydown",a),console.log("mounted")});const x=t()?"⌘K":"Ctrl+K",v=D(()=>m.getters["solicitudesStore/getSearchCreate"]),o=h([]),i=h([]),l=h(0),k=Z.debounce(async n=>{let I=await N.get("/admin/clientes/search/",{params:{term:n}});o.value=I.data,await V(),i.value=[]},250),C=n=>{["ArrowUp","ArrowDown","Enter"].includes(n.code)&&n.preventDefault()},S=n=>{switch(n.code){case"ArrowDown":l.value===o.value.length-1?l.value=0:l.value+=1;break;case"ArrowUp":l.value===0?l.value=o.value.length-1:l.value-=1;break;case"Enter":U(o.value[l.value]);break}i.value[l.value]?.scrollIntoView(!1)},a=n=>{v.value||(n.metaKey||n.ctrlKey)&&n.key==="k"&&(m.dispatch("solicitudesStore/toggleModalSearchUser"),n.preventDefault())},p=()=>{o.value[l.value]&&(window.location=o.value[l.value].url)},b=()=>{m.dispatch("solicitudesStore/toggleModalSearchUser")},U=n=>{b(),z.get("clientes/"+n.uuid+"/show")};return $(()=>window.removeEventListener("keydown",a)),{...G("solicitudesStore",["toggleModalAddUser","selectUsuario","toggleModalSearchUser"]),isOpen:v,navigateResults:S,onTermKeydown:C,results:o,resultsRefs:i,search:k,selectedIndex:l,closeModal:b,keyboardShortcut:x,onSubmit:p,selectUser:U}}},re={class:"flex items-center justify-center"},ne={class:"flex-none text-xs font-semibold text-blue-800"},ie={class:"flex flex-col overflow-hidden w-full max-w-2xl bg-white rounded-lg mx-4 max-h-[80vh] mt-[10vh] relative"},de={class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},ce={class:"absolute inset-y-0 right-0 flex items-center pr-3"},ue={class:"overflow-auto"},me={key:0,class:"divide-y divide-gray-300"},fe=["onMousemove","onClick"],pe={class:"ml-3"},be={class:"font-semibold text-gray-600"},ge={key:1,class:"p-10 text-lg text-center text-gray-400"};function ve(c,s,m,t,x,v){const o=g("MagnifyingGlassIcon"),i=g("DialogOverlay"),l=g("TransitionChild"),k=g("UserPlusIcon"),C=g("Dialog"),S=g("TransitionRoot");return u(),f("div",re,[e("button",j(c.$attrs,{type:"button",onClick:s[0]||(s[0]=(...a)=>c.toggleModalSearchUser&&c.toggleModalSearchUser(...a)),class:"flex items-center space-x-2 border border-gray-300 shadow-sm px-3 py-1.5 hover:border-gray-600 focus:outline-none focus:border-gray-600 rounded-lg"}),[r(o,{class:"flex-none text-blue-800 -ml-1 w-5 h-5","aria-hidden":"true"}),s[6]||(s[6]=e("span",{class:"text-sm text-blue-800 flex-1 text-left"},"..buscar",-1)),e("span",ne,w(t.keyboardShortcut),1)],16),r(S,{show:t.isOpen,as:"template"},{default:d(()=>[r(C,{open:t.isOpen,onClose:t.closeModal,onKeydown:t.navigateResults,class:"fixed inset-0 z-50 flex justify-center items-start"},{default:d(()=>[r(l,{enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:d(()=>[r(i,{class:"fixed inset-0 bg-black bg-opacity-75"})]),_:1}),r(l,{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[e("div",ie,[e("form",{action:"#",class:"relative flex items-center",onSubmit:s[5]||(s[5]=L((...a)=>t.onSubmit&&t.onSubmit(...a),["prevent"]))},[e("div",de,[r(o,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})]),e("input",{onInput:s[1]||(s[1]=a=>t.search(a.target.value)),onKeydown:s[2]||(s[2]=(...a)=>t.onTermKeydown&&t.onTermKeydown(...a)),type:"text",placeholder:"Buscar",class:"w-full py-4 pl-12 border-b border-gray-100 placeholder-gray-400"},null,32),e("div",ce,[e("button",{onClick:s[3]||(s[3]=(...a)=>t.closeModal&&t.closeModal(...a)),type:"button",class:"flex items-center p-1.5 uppercase font-semibold tracking-wider text-gray-700 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"}," Esc "),e("button",{onClick:s[4]||(s[4]=a=>c.toggleModalAddUser()),type:"button",class:"flex items-center p-1.5 uppercase ml-1 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"},[r(k,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})])])],32),e("div",ue,[t.results?(u(),f("ul",me,[(u(!0),f(R,null,B(t.results,(a,p)=>(u(),f("li",{key:p,ref_for:!0,ref:b=>{t.resultsRefs[p]=b},class:E([t.selectedIndex===p?"italic bg-gray-100":"","flex items-center px-4 py-2.5 relative"]),onMousemove:b=>t.selectedIndex=p,onClick:b=>t.selectUser(a)},[s[7]||(s[7]=e("span",{class:"absolute inset-0"},null,-1)),e("div",pe,[e("div",be,w(a.nombre)+" "+w(a.apellido1)+" "+w(a.apellido2=="NULL"?"":a.apellido2),1)])],42,fe))),128))])):M("",!0),t.results.length===0?(u(),f("p",ge," Sin resultados aún...:( ")):M("",!0)])])]),_:1})]),_:1},8,["open","onClose","onKeydown"])]),_:1},8,["show"])])}const he=q(le,[["render",ve]]),xe={class:"flex flex-row justify-between items-center"},we={class:"font-semibold text-xl text-gray-800 leading-tight"},ye={class:"py-12"},_e={class:"max-w-full mx-auto sm:px-6 lg:px-8"},ke={class:"overflow-hidden shadow-xl sm:rounded-lg"},Ce={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},Se={class:"mt-8 flex flex-row m-2"},Me={class:"w-1/2 flex justify-end"},Ue={class:"border-green-700 border bg-white rounded mr-4 w-32 mb:w-42 p-1 hover:bg-aqua transition duration-500 btn btn-md"},Ae={class:"flex flex-row"},De={class:"flex justify-start m-4"},Ie={class:"bg-white rounded shadow overflow-x-auto"},Te={key:0},Ke={class:"flex space-x-2"},Pe={class:"max-w-3xl mx-auto sm:px-6 lg:px-8 pt-4"},He={__name:"ListClientes",props:["clientes"],setup(c){const s=D(()=>[{label:"Inicio",url:route("dashboard.list")},{label:"Clientes"}]),m=c,t=h([]),x=h([{label:"Nombre",field:"created_at"},{label:"Apellido 1",field:"user"},{label:"Apellido 2",field:"cliente"},{label:"Teléfono",field:"departamento"},{label:"Correo",field:"tramite"},{label:"Centro de Trabajo",field:"ct"},{label:"Acciones",field:"acciones",sortable:!1}]);A(()=>{t.value=m.clientes.data.clientes.map(o=>({uuid:o.data.uuid,created_at:o.data.attributes.nombre,user:o.data.attributes.apellido1,cliente:o.data.attributes.apellido2,departamento:o.data.attributes.telefono,tramite:o.data.attributes.email,ct:o.data.cct.data.attributes.nombre_ct,acciones:"acciones"}))});const{clientes:v}=F(m);return(o,i)=>(u(),J(K,null,{header:d(()=>[e("div",xe,[e("h2",we,[r(te,{items:s.value},null,8,["items"])])]),e("div",ye,[e("div",_e,[e("div",ke,[e("div",Ce,[e("div",Se,[i[1]||(i[1]=e("p",{class:"text-2xl ml-4 w-1/2"}," Usuarios en el sistema ",-1)),e("div",Me,[r(_,{href:o.route("admin.clientes/create",{})},{default:d(()=>[e("button",Ue,[e("div",Ae,[r(T,{name:"plus",class:"block w-6 h-6 fill-gray-400"}),i[0]||(i[0]=e("p",{class:"font-bold"}," Agregar Usuario ",-1))])])]),_:1},8,["href"])])]),e("div",De,[r(he)]),e("div",Ie,[r(y(oe),{columns:x.value,rows:t.value,styleClass:"vgt-table striped"},{"table-row":d(l=>[l.column.field==="acciones"?(u(),f("span",Te,[e("div",Ke,[r(_,{href:o.route("admin.clientes/show",{cliente:l.row.uuid}),class:"text-blue-600 hover:text-blue-900"},{default:d(()=>[r(y(ae),{class:"w-5 h-5"})]),_:1},8,["href"]),r(_,{href:o.route("admin.clientes/edit",{cliente:l.row.uuid}),class:"text-blue-600 hover:text-blue-900"},{default:d(()=>[r(y(se),{class:"w-5 h-5"})]),_:1},8,["href"])])])):M("",!0)]),_:1},8,["columns","rows"])]),e("div",Pe,[r(P,{meta:y(v).meta},null,8,["meta"])])])])])])]),_:1}))}};export{He as default};
