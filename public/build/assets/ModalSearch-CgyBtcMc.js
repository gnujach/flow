import{q as U,s as C,k as D,v as k,x as I,y as K,z as A,A as T,r as u,e as g,o as y,a,b as l,t as v,p as E,w as x,i as O,f as M,F as P,h as R,n as L}from"./app-CArJwsA3.js";import{J as N}from"./NavLink-C3AtBab6.js";import{r as B,l as V}from"./lodash-C8Y5UCqI.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as G,S as j,_ as F,Y as J,r as Y}from"./transition-DvF6H_Oy.js";const q={components:{MagnifyingGlassIcon:Y,UserPlusIcon:B,Dialog:J,DialogOverlay:F,TransitionRoot:j,TransitionChild:G,JetNavLink:N},setup(c,t){const f=U(),e=()=>{var i;const n=((i=navigator==null?void 0:navigator.userAgentData)==null?void 0:i.platform)||(navigator==null?void 0:navigator.platform)||"unknown";return/(Mac|iPhone|iPod|iPad)/i.test(n)};C(()=>{window.addEventListener("keydown",o)});const S=e()?"⌘K":"Ctrl+K",b=D(()=>f.getters["solicitudesStore/getSearchCreate"]),r=k([]),m=k([]),s=k(0),h=V.debounce(async n=>{let i=await I.get("/admin/clientes/search/",{params:{term:n}});r.value=i.data,await K(),m.value=[]},250),w=n=>{["ArrowUp","ArrowDown","Enter"].includes(n.code)&&n.preventDefault()},_=n=>{var i;switch(n.code){case"ArrowDown":s.value===r.value.length-1?s.value=0:s.value+=1;break;case"ArrowUp":s.value===0?s.value=r.value.length-1:s.value-=1;break;case"Enter":f.dispatch("solicitudesStore/selectUsuario",r.value[s.value]);break}(i=m.value[s.value])==null||i.scrollIntoView(!1)},o=n=>{b.value||(n.metaKey||n.ctrlKey)&&n.key==="k"&&(f.dispatch("solicitudesStore/toggleModalSearchUser"),n.preventDefault())},d=()=>{r.value[s.value]&&(window.location=r.value[s.value].url)},p=()=>{f.dispatch("solicitudesStore/toggleModalSearchUser")};return A(()=>window.removeEventListener("keydown",o)),{...T("solicitudesStore",["toggleModalAddUser","selectUsuario","toggleModalSearchUser"]),isOpen:b,navigateResults:_,onTermKeydown:w,results:r,resultsRefs:m,search:h,selectedIndex:s,closeModal:p,keyboardShortcut:S,onSubmit:d}}},H={class:"flex items-center justify-center"},Q={class:"flex-none text-xs font-semibold text-blue-800"},W={class:"flex flex-col overflow-hidden w-full max-w-2xl bg-white rounded-lg mx-4 max-h-[80vh] mt-[10vh] relative"},X={class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},Z={class:"absolute inset-y-0 right-0 flex items-center pr-3"},$={class:"overflow-auto"},ee={key:0,class:"divide-y divide-gray-300"},oe=["onMousemove","onClick"],te={class:"ml-3"},se={class:"font-semibold text-gray-600"},ae={key:1,class:"p-10 text-lg text-center text-gray-400"};function ne(c,t,f,e,S,b){const r=u("MagnifyingGlassIcon"),m=u("DialogOverlay"),s=u("TransitionChild"),h=u("UserPlusIcon"),w=u("Dialog"),_=u("TransitionRoot");return y(),g("div",H,[a("button",E(c.$attrs,{type:"button",onClick:t[0]||(t[0]=(...o)=>c.toggleModalSearchUser&&c.toggleModalSearchUser(...o)),class:"flex items-center space-x-2 border border-gray-300 shadow-sm px-3 py-1.5 hover:border-gray-600 focus:outline-none focus:border-gray-600 rounded-lg"}),[l(r,{class:"flex-none text-blue-800 -ml-1 w-5 h-5","aria-hidden":"true"}),t[6]||(t[6]=a("span",{class:"text-sm text-blue-800 flex-1 text-left"},"..buscar",-1)),a("span",Q,v(e.keyboardShortcut),1)],16),l(_,{show:e.isOpen,as:"template"},{default:x(()=>[l(w,{open:e.isOpen,onClose:e.closeModal,onKeydown:e.navigateResults,class:"fixed inset-0 z-50 flex justify-center items-start"},{default:x(()=>[l(s,{enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:x(()=>[l(m,{class:"fixed inset-0 bg-black bg-opacity-75"})]),_:1}),l(s,{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:x(()=>[a("div",W,[a("form",{action:"#",class:"relative flex items-center",onSubmit:t[5]||(t[5]=O((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"]))},[a("div",X,[l(r,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})]),a("input",{onInput:t[1]||(t[1]=o=>e.search(o.target.value)),onKeydown:t[2]||(t[2]=(...o)=>e.onTermKeydown&&e.onTermKeydown(...o)),type:"text",placeholder:"Buscar",class:"w-full py-4 pl-12 border-b border-gray-100 placeholder-gray-400"},null,32),a("div",Z,[a("button",{onClick:t[3]||(t[3]=(...o)=>e.closeModal&&e.closeModal(...o)),type:"button",class:"flex items-center p-1.5 uppercase font-semibold tracking-wider text-gray-700 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"}," Esc "),a("button",{onClick:t[4]||(t[4]=o=>c.toggleModalAddUser()),type:"button",class:"flex items-center p-1.5 uppercase ml-1 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"},[l(h,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})])])],32),a("div",$,[e.results?(y(),g("ul",ee,[(y(!0),g(P,null,R(e.results,(o,d)=>(y(),g("li",{key:d,ref_for:!0,ref:p=>{e.resultsRefs[d]=p},class:L([e.selectedIndex===d?"italic bg-gray-100":"","flex items-center px-4 py-2.5 relative"]),onMousemove:p=>e.selectedIndex=d,onClick:p=>c.selectUsuario(o)},[t[7]||(t[7]=a("span",{class:"absolute inset-0"},null,-1)),a("div",te,[a("div",se,v(o.nombre)+" "+v(o.apellido1)+" "+v(o.apellido2=="NULL"?"":o.apellido2),1)])],42,oe))),128))])):M("",!0),e.results.length===0?(y(),g("p",ae," Sin resultados aún... ")):M("",!0)])])]),_:1})]),_:1},8,["open","onClose","onKeydown"])]),_:1},8,["show"])])}const ue=z(q,[["render",ne]]);export{ue as M};
