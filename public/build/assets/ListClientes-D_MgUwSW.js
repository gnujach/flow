import{I as T,A as K}from"./AppLayout-DUjHnlK8.js";import{J as S}from"./NavLink-Cdwd4ogD.js";import{P}from"./Pagination-B615hAGB.js";import{r as b,e as g,o as m,a as e,b as r,t as y,s as L,w as d,i as R,f as M,F as E,h as O,n as j,v as B,x as A,k as D,p as x,y as N,z as V,A as G,B as $,C as z,D as F,c as J,m as C}from"./app-D6wma5Jt.js";import{r as Y,l as q}from"./lodash-Pr6HadGB.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as Q,S as W,_ as X,Y as Z,r as ee}from"./transition-BLi5fHmm.js";import{_ as te}from"./Breadcrumb-CeYhVLbE.js";import{V as oe}from"./vue-good-table-next-DmiqDYuI.js";import{r as se}from"./PencilIcon-Chnl8XWp.js";import"./ResponsiveNavLink-5BKLrGg6.js";import"./keyboard-CEw009Jf.js";import"./use-resolve-button-type-MqscY4ya.js";import"./open-closed-CYEdXda2.js";/* empty css            */import"./ChevronRightIcon-AMtqLIrc.js";const ae={components:{MagnifyingGlassIcon:ee,UserPlusIcon:Y,Dialog:Z,DialogOverlay:X,TransitionRoot:W,TransitionChild:Q,JetNavLink:S},setup(c,s){const u=B(),t=()=>{const n=navigator?.userAgentData?.platform||navigator?.platform||"unknown";return/(Mac|iPhone|iPod|iPad)/i.test(n)};A(()=>{window.addEventListener("keydown",a),console.log("mounted")});const h=t()?"⌘K":"Ctrl+K",v=D(()=>u.getters["solicitudesStore/getSearchCreate"]),o=x([]),i=x([]),l=x(0),_=q.debounce(async n=>{let I=await N.get("/admin/clientes/search/",{params:{term:n}});o.value=I.data,await V(),i.value=[]},250),w=n=>{["ArrowUp","ArrowDown","Enter"].includes(n.code)&&n.preventDefault()},k=n=>{switch(n.code){case"ArrowDown":l.value===o.value.length-1?l.value=0:l.value+=1;break;case"ArrowUp":l.value===0?l.value=o.value.length-1:l.value-=1;break;case"Enter":U(o.value[l.value]);break}i.value[l.value]?.scrollIntoView(!1)},a=n=>{v.value||(n.metaKey||n.ctrlKey)&&n.key==="k"&&(u.dispatch("solicitudesStore/toggleModalSearchUser"),n.preventDefault())},f=()=>{o.value[l.value]&&(window.location=o.value[l.value].url)},p=()=>{u.dispatch("solicitudesStore/toggleModalSearchUser")},U=n=>{p(),z.get("clientes/"+n.uuid+"/show")};return G(()=>window.removeEventListener("keydown",a)),{...$("solicitudesStore",["toggleModalAddUser","selectUsuario","toggleModalSearchUser"]),isOpen:v,navigateResults:k,onTermKeydown:w,results:o,resultsRefs:i,search:_,selectedIndex:l,closeModal:p,keyboardShortcut:h,onSubmit:f,selectUser:U}}},le={class:"flex items-center justify-center"},re={class:"flex-none text-xs font-semibold text-blue-800"},ne={class:"flex flex-col overflow-hidden w-full max-w-2xl bg-white rounded-lg mx-4 max-h-[80vh] mt-[10vh] relative"},ie={class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},de={class:"absolute inset-y-0 right-0 flex items-center pr-3"},ce={class:"overflow-auto"},ue={key:0,class:"divide-y divide-gray-300"},me=["onMousemove","onClick"],fe={class:"ml-3"},pe={class:"font-semibold text-gray-600"},be={key:1,class:"p-10 text-lg text-center text-gray-400"};function ge(c,s,u,t,h,v){const o=b("MagnifyingGlassIcon"),i=b("DialogOverlay"),l=b("TransitionChild"),_=b("UserPlusIcon"),w=b("Dialog"),k=b("TransitionRoot");return m(),g("div",le,[e("button",L(c.$attrs,{type:"button",onClick:s[0]||(s[0]=(...a)=>c.toggleModalSearchUser&&c.toggleModalSearchUser(...a)),class:"flex items-center space-x-2 border border-gray-300 shadow-sm px-3 py-1.5 hover:border-gray-600 focus:outline-none focus:border-gray-600 rounded-lg"}),[r(o,{class:"flex-none text-blue-800 -ml-1 w-5 h-5","aria-hidden":"true"}),s[6]||(s[6]=e("span",{class:"text-sm text-blue-800 flex-1 text-left"},"..buscar",-1)),e("span",re,y(t.keyboardShortcut),1)],16),r(k,{show:t.isOpen,as:"template"},{default:d(()=>[r(w,{open:t.isOpen,onClose:t.closeModal,onKeydown:t.navigateResults,class:"fixed inset-0 z-50 flex justify-center items-start"},{default:d(()=>[r(l,{enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:d(()=>[r(i,{class:"fixed inset-0 bg-black bg-opacity-75"})]),_:1}),r(l,{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:d(()=>[e("div",ne,[e("form",{action:"#",class:"relative flex items-center",onSubmit:s[5]||(s[5]=R((...a)=>t.onSubmit&&t.onSubmit(...a),["prevent"]))},[e("div",ie,[r(o,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})]),e("input",{onInput:s[1]||(s[1]=a=>t.search(a.target.value)),onKeydown:s[2]||(s[2]=(...a)=>t.onTermKeydown&&t.onTermKeydown(...a)),type:"text",placeholder:"Buscar",class:"w-full py-4 pl-12 border-b border-gray-100 placeholder-gray-400"},null,32),e("div",de,[e("button",{onClick:s[3]||(s[3]=(...a)=>t.closeModal&&t.closeModal(...a)),type:"button",class:"flex items-center p-1.5 uppercase font-semibold tracking-wider text-gray-700 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"}," Esc "),e("button",{onClick:s[4]||(s[4]=a=>c.toggleModalAddUser()),type:"button",class:"flex items-center p-1.5 uppercase ml-1 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"},[r(_,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})])])],32),e("div",ce,[t.results?(m(),g("ul",ue,[(m(!0),g(E,null,O(t.results,(a,f)=>(m(),g("li",{key:f,ref_for:!0,ref:p=>{t.resultsRefs[f]=p},class:j([t.selectedIndex===f?"italic bg-gray-100":"","flex items-center px-4 py-2.5 relative"]),onMousemove:p=>t.selectedIndex=f,onClick:p=>t.selectUser(a)},[s[7]||(s[7]=e("span",{class:"absolute inset-0"},null,-1)),e("div",fe,[e("div",pe,y(a.nombre)+" "+y(a.apellido1)+" "+y(a.apellido2=="NULL"?"":a.apellido2),1)])],42,me))),128))])):M("",!0),t.results.length===0?(m(),g("p",be," Sin resultados aún...:( ")):M("",!0)])])]),_:1})]),_:1},8,["open","onClose","onKeydown"])]),_:1},8,["show"])])}const ve=H(ae,[["render",ge]]),xe={class:"flex flex-row justify-between items-center"},he={class:"font-semibold text-xl text-gray-800 leading-tight"},ye={class:"py-12"},_e={class:"max-w-full mx-auto sm:px-6 lg:px-8"},we={class:"overflow-hidden shadow-xl sm:rounded-lg"},ke={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},Ce={class:"mt-8 flex flex-row m-2"},Se={class:"w-1/2 flex justify-end"},Me={class:"border-green-700 border bg-white rounded mr-4 w-32 mb:w-42 p-1 hover:bg-aqua transition duration-500 btn btn-md"},Ue={class:"flex flex-row"},Ae={class:"flex justify-start m-4"},De={class:"bg-white rounded shadow overflow-x-auto"},Ie={key:0},Te={class:"flex space-x-2"},Ke={class:"max-w-3xl mx-auto sm:px-6 lg:px-8 pt-4"},He={__name:"ListClientes",props:["clientes"],setup(c){const s=D(()=>[{label:"Inicio",url:route("dashboard.list")},{label:"Clientes"}]),u=c,t=x([]),h=x([{label:"Nombre",field:"created_at"},{label:"Apellido 1",field:"user"},{label:"Apellido 2",field:"cliente"},{label:"Teléfono",field:"departamento"},{label:"Correo",field:"tramite"},{label:"Centro de Trabajo",field:"ct"},{label:"Acciones",field:"acciones",sortable:!1}]);A(()=>{t.value=u.clientes.data.clientes.map(o=>({uuid:o.data.uuid,created_at:o.data.attributes.nombre,user:o.data.attributes.apellido1,cliente:o.data.attributes.apellido2,departamento:o.data.attributes.telefono,tramite:o.data.attributes.email,ct:o.data.cct.data.attributes.nombre_ct,acciones:"acciones"}))});const{clientes:v}=F(u);return(o,i)=>(m(),J(K,null,{header:d(()=>[e("div",xe,[e("h2",he,[r(te,{items:s.value},null,8,["items"])])]),e("div",ye,[e("div",_e,[e("div",we,[e("div",ke,[e("div",Ce,[i[1]||(i[1]=e("p",{class:"text-2xl ml-4 w-1/2"}," Usuarios en el sistema ",-1)),e("div",Se,[r(S,{href:o.route("admin.clientes/create",{})},{default:d(()=>[e("button",Me,[e("div",Ue,[r(T,{name:"plus",class:"block w-6 h-6 fill-gray-400"}),i[0]||(i[0]=e("p",{class:"font-bold"}," Agregar Usuario ",-1))])])]),_:1},8,["href"])])]),e("div",Ae,[r(ve)]),e("div",De,[r(C(oe),{columns:h.value,rows:t.value,styleClass:"vgt-table striped"},{"table-row":d(l=>[l.column.field==="acciones"?(m(),g("span",Ie,[e("div",Te,[r(S,{href:o.route("admin.clientes/edit",{cliente:l.row.uuid}),class:"text-blue-600 hover:text-blue-900"},{default:d(()=>[r(C(se),{class:"w-5 h-5"})]),_:1},8,["href"])])])):M("",!0)]),_:1},8,["columns","rows"])]),e("div",Ke,[r(P,{meta:C(v).meta},null,8,["meta"])])])])])])]),_:1}))}};export{He as default};
