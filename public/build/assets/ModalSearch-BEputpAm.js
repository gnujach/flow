import{v as U,x as C,k as D,p as _,y as I,z as K,A,B as T,r as d,e as p,o as g,a,b as l,t as y,s as E,w as v,i as O,f as S,F as P,h as R,n as L}from"./app-DtEjYFhl.js";import{J as B}from"./NavLink-DYDO7fN8.js";import{r as N,l as V}from"./lodash-4XKa6AHP.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{h as G,S as j,_ as F,Y as J,r as Y}from"./transition-0vP9zWr3.js";const q={components:{MagnifyingGlassIcon:Y,UserPlusIcon:N,Dialog:J,DialogOverlay:F,TransitionRoot:j,TransitionChild:G,JetNavLink:B},setup(i,t){const u=U(),e=()=>{const n=navigator?.userAgentData?.platform||navigator?.platform||"unknown";return/(Mac|iPhone|iPod|iPad)/i.test(n)};C(()=>{window.addEventListener("keydown",o)});const k=e()?"⌘K":"Ctrl+K",x=D(()=>u.getters["solicitudesStore/getSearchCreate"]),r=_([]),f=_([]),s=_(0),b=V.debounce(async n=>{let M=await I.get("/admin/clientes/search/",{params:{term:n}});r.value=M.data,await K(),f.value=[]},250),h=n=>{["ArrowUp","ArrowDown","Enter"].includes(n.code)&&n.preventDefault()},w=n=>{switch(n.code){case"ArrowDown":s.value===r.value.length-1?s.value=0:s.value+=1;break;case"ArrowUp":s.value===0?s.value=r.value.length-1:s.value-=1;break;case"Enter":u.dispatch("solicitudesStore/selectUsuario",r.value[s.value]);break}f.value[s.value]?.scrollIntoView(!1)},o=n=>{x.value||(n.metaKey||n.ctrlKey)&&n.key==="k"&&(u.dispatch("solicitudesStore/toggleModalSearchUser"),n.preventDefault())},c=()=>{r.value[s.value]&&(window.location=r.value[s.value].url)},m=()=>{u.dispatch("solicitudesStore/toggleModalSearchUser")};return A(()=>window.removeEventListener("keydown",o)),{...T("solicitudesStore",["toggleModalAddUser","selectUsuario","toggleModalSearchUser"]),isOpen:x,navigateResults:w,onTermKeydown:h,results:r,resultsRefs:f,search:b,selectedIndex:s,closeModal:m,keyboardShortcut:k,onSubmit:c}}},H={class:"flex items-center justify-center"},Q={class:"flex-none text-xs font-semibold text-blue-800"},W={class:"flex flex-col overflow-hidden w-full max-w-2xl bg-white rounded-lg mx-4 max-h-[80vh] mt-[10vh] relative"},X={class:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},Z={class:"absolute inset-y-0 right-0 flex items-center pr-3"},$={class:"overflow-auto"},ee={key:0,class:"divide-y divide-gray-300"},oe=["onMousemove","onClick"],te={class:"ml-3"},se={class:"font-semibold text-gray-600"},ae={key:1,class:"p-10 text-lg text-center text-gray-400"};function ne(i,t,u,e,k,x){const r=d("MagnifyingGlassIcon"),f=d("DialogOverlay"),s=d("TransitionChild"),b=d("UserPlusIcon"),h=d("Dialog"),w=d("TransitionRoot");return g(),p("div",H,[a("button",E(i.$attrs,{type:"button",onClick:t[0]||(t[0]=(...o)=>i.toggleModalSearchUser&&i.toggleModalSearchUser(...o)),class:"flex items-center space-x-2 border border-gray-300 shadow-sm px-3 py-1.5 hover:border-gray-600 focus:outline-none focus:border-gray-600 rounded-lg"}),[l(r,{class:"flex-none text-blue-800 -ml-1 w-5 h-5","aria-hidden":"true"}),t[6]||(t[6]=a("span",{class:"text-sm text-blue-800 flex-1 text-left"},"..buscar",-1)),a("span",Q,y(e.keyboardShortcut),1)],16),l(w,{show:e.isOpen,as:"template"},{default:v(()=>[l(h,{open:e.isOpen,onClose:e.closeModal,onKeydown:e.navigateResults,class:"fixed inset-0 z-50 flex justify-center items-start"},{default:v(()=>[l(s,{enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:v(()=>[l(f,{class:"fixed inset-0 bg-black bg-opacity-75"})]),_:1}),l(s,{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:v(()=>[a("div",W,[a("form",{action:"#",class:"relative flex items-center",onSubmit:t[5]||(t[5]=O((...o)=>e.onSubmit&&e.onSubmit(...o),["prevent"]))},[a("div",X,[l(r,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})]),a("input",{onInput:t[1]||(t[1]=o=>e.search(o.target.value)),onKeydown:t[2]||(t[2]=(...o)=>e.onTermKeydown&&e.onTermKeydown(...o)),type:"text",placeholder:"Buscar",class:"w-full py-4 pl-12 border-b border-gray-100 placeholder-gray-400"},null,32),a("div",Z,[a("button",{onClick:t[3]||(t[3]=(...o)=>e.closeModal&&e.closeModal(...o)),type:"button",class:"flex items-center p-1.5 uppercase font-semibold tracking-wider text-gray-700 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"}," Esc "),a("button",{onClick:t[4]||(t[4]=o=>i.toggleModalAddUser()),type:"button",class:"flex items-center p-1.5 uppercase ml-1 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"},[l(b,{class:"flex-none text-gray-700 -ml-1 w-5 h-5","aria-hidden":"true"})])])],32),a("div",$,[e.results?(g(),p("ul",ee,[(g(!0),p(P,null,R(e.results,(o,c)=>(g(),p("li",{key:c,ref_for:!0,ref:m=>{e.resultsRefs[c]=m},class:L([e.selectedIndex===c?"italic bg-gray-100":"","flex items-center px-4 py-2.5 relative"]),onMousemove:m=>e.selectedIndex=c,onClick:m=>i.selectUsuario(o)},[t[7]||(t[7]=a("span",{class:"absolute inset-0"},null,-1)),a("div",te,[a("div",se,y(o.nombre)+" "+y(o.apellido1)+" "+y(o.apellido2=="NULL"?"":o.apellido2),1)])],42,oe))),128))])):S("",!0),e.results.length===0?(g(),p("p",ae," Sin resultados aún... ")):S("",!0)])])]),_:1})]),_:1},8,["open","onClose","onKeydown"])]),_:1},8,["show"])])}const ue=z(q,[["render",ne]]);export{ue as M};
