import{J as $}from"./ActionMessage-B-Ztyjv3.js";import{J as w}from"./Modal-DqQiNYOK.js";import{J as D}from"./Button-DYi5d6FP.js";import{J as B}from"./ConfirmationModal-CuO7jSdR.js";import{J as h}from"./DangerButton-CXGNpOgL.js";import{J as I}from"./DialogModal-DK6pd8Sm.js";import{J as V}from"./FormSection-DQMytoRC.js";import{J as M}from"./Input-BI_iGO1Y.js";import{J as N}from"./Checkbox-DCraMf00.js";import{J as L}from"./InputError-U-lskrRX.js";import{J as U}from"./Label-_b3VnWKN.js";import{J as E}from"./SecondaryButton-DDAPIt3K.js";import{J as z}from"./SectionBorder-D4ojhM8v.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as q,r,e as a,o as m,b as n,f as d,w as t,g as i,n as g,a as l,F as f,h as c,t as u}from"./app-CArJwsA3.js";import"./SectionTitle-DbZK12cy.js";const G=q({components:{JetActionMessage:$,JetActionSection:w,JetButton:D,JetConfirmationModal:B,JetDangerButton:h,JetDialogModal:I,JetFormSection:V,JetInput:M,JetCheckbox:N,JetInputError:L,JetLabel:U,JetSecondaryButton:E,JetSectionBorder:z},props:["tokens","availablePermissions","defaultPermissions"],data(){return{createApiTokenForm:this.$inertia.form({name:"",permissions:this.defaultPermissions}),updateApiTokenForm:this.$inertia.form({permissions:[]}),deleteApiTokenForm:this.$inertia.form(),displayingToken:!1,managingPermissionsFor:null,apiTokenBeingDeleted:null}},methods:{createApiToken(){this.createApiTokenForm.post(route("api-tokens.store"),{preserveScroll:!0,onSuccess:()=>{this.displayingToken=!0,this.createApiTokenForm.reset()}})},manageApiTokenPermissions(o){this.updateApiTokenForm.permissions=o.abilities,this.managingPermissionsFor=o},updateApiToken(){this.updateApiTokenForm.put(route("api-tokens.update",this.managingPermissionsFor),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.managingPermissionsFor=null})},confirmApiTokenDeletion(o){this.apiTokenBeingDeleted=o},deleteApiToken(){this.deleteApiTokenForm.delete(route("api-tokens.destroy",this.apiTokenBeingDeleted),{preserveScroll:!0,preserveState:!0,onSuccess:()=>this.apiTokenBeingDeleted=null})}}}),H={class:"col-span-6 sm:col-span-4"},K={key:0,class:"col-span-6"},O={class:"mt-2 grid grid-cols-1 md:grid-cols-2 gap-4"},Q={class:"flex items-center"},R={class:"ml-2 text-sm text-gray-600"},W={key:0},X={class:"mt-10 sm:mt-0"},Z={class:"space-y-6"},x={class:"flex items-center"},ee={key:0,class:"text-sm text-gray-400"},oe=["onClick"],te=["onClick"],se={key:0,class:"mt-4 bg-gray-100 px-4 py-2 rounded font-mono text-sm text-gray-500"},ne={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},ie={class:"flex items-center"},re={class:"ml-2 text-sm text-gray-600"};function le(o,e,ae,me,pe,de){const T=r("jet-label"),b=r("jet-input"),F=r("jet-input-error"),y=r("jet-checkbox"),j=r("jet-action-message"),A=r("jet-button"),P=r("jet-form-section"),C=r("jet-section-border"),J=r("jet-action-section"),k=r("jet-secondary-button"),v=r("jet-dialog-modal"),_=r("jet-danger-button"),S=r("jet-confirmation-modal");return m(),a("div",null,[n(P,{onSubmitted:o.createApiToken},{title:t(()=>[...e[9]||(e[9]=[i(" Create API Token ",-1)])]),description:t(()=>[...e[10]||(e[10]=[i(" API tokens allow third-party services to authenticate with our application on your behalf. ",-1)])]),form:t(()=>[l("div",H,[n(T,{for:"name",value:"Name"}),n(b,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o.createApiTokenForm.name,"onUpdate:modelValue":e[0]||(e[0]=s=>o.createApiTokenForm.name=s),autofocus:""},null,8,["modelValue"]),n(F,{message:o.createApiTokenForm.errors.name,class:"mt-2"},null,8,["message"])]),o.availablePermissions.length>0?(m(),a("div",K,[n(T,{for:"permissions",value:"Permissions"}),l("div",O,[(m(!0),a(f,null,c(o.availablePermissions,s=>(m(),a("div",{key:s},[l("label",Q,[n(y,{value:s,checked:o.createApiTokenForm.permissions,"onUpdate:checked":e[1]||(e[1]=p=>o.createApiTokenForm.permissions=p)},null,8,["value","checked"]),l("span",R,u(s),1)])]))),128))])])):d("",!0)]),actions:t(()=>[n(j,{on:o.createApiTokenForm.recentlySuccessful,class:"mr-3"},{default:t(()=>[...e[11]||(e[11]=[i(" Created. ",-1)])]),_:1},8,["on"]),n(A,{class:g({"opacity-25":o.createApiTokenForm.processing}),disabled:o.createApiTokenForm.processing},{default:t(()=>[...e[12]||(e[12]=[i(" Create ",-1)])]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"]),o.tokens.length>0?(m(),a("div",W,[n(C),l("div",X,[n(J,null,{title:t(()=>[...e[13]||(e[13]=[i(" Manage API Tokens ",-1)])]),description:t(()=>[...e[14]||(e[14]=[i(" You may delete any of your existing tokens if they are no longer needed. ",-1)])]),content:t(()=>[l("div",Z,[(m(!0),a(f,null,c(o.tokens,s=>(m(),a("div",{class:"flex items-center justify-between",key:s.id},[l("div",null,u(s.name),1),l("div",x,[s.last_used_ago?(m(),a("div",ee," Last used "+u(s.last_used_ago),1)):d("",!0),o.availablePermissions.length>0?(m(),a("button",{key:1,class:"cursor-pointer ml-6 text-sm text-gray-400 underline",onClick:p=>o.manageApiTokenPermissions(s)}," Permissions ",8,oe)):d("",!0),l("button",{class:"cursor-pointer ml-6 text-sm text-red-500",onClick:p=>o.confirmApiTokenDeletion(s)}," Delete ",8,te)])]))),128))])]),_:1})])])):d("",!0),n(v,{show:o.displayingToken,onClose:e[3]||(e[3]=s=>o.displayingToken=!1)},{title:t(()=>[...e[15]||(e[15]=[i(" API Token ",-1)])]),content:t(()=>[e[16]||(e[16]=l("div",null," Please copy your new API token. For your security, it won't be shown again. ",-1)),o.$page.props.jetstream.flash.token?(m(),a("div",se,u(o.$page.props.jetstream.flash.token),1)):d("",!0)]),footer:t(()=>[n(k,{onClick:e[2]||(e[2]=s=>o.displayingToken=!1)},{default:t(()=>[...e[17]||(e[17]=[i(" Close ",-1)])]),_:1})]),_:1},8,["show"]),n(v,{show:o.managingPermissionsFor,onClose:e[6]||(e[6]=s=>o.managingPermissionsFor=null)},{title:t(()=>[...e[18]||(e[18]=[i(" API Token Permissions ",-1)])]),content:t(()=>[l("div",ne,[(m(!0),a(f,null,c(o.availablePermissions,s=>(m(),a("div",{key:s},[l("label",ie,[n(y,{value:s,checked:o.updateApiTokenForm.permissions,"onUpdate:checked":e[4]||(e[4]=p=>o.updateApiTokenForm.permissions=p)},null,8,["value","checked"]),l("span",re,u(s),1)])]))),128))])]),footer:t(()=>[n(k,{onClick:e[5]||(e[5]=s=>o.managingPermissionsFor=null)},{default:t(()=>[...e[19]||(e[19]=[i(" Cancel ",-1)])]),_:1}),n(A,{class:g(["ml-3",{"opacity-25":o.updateApiTokenForm.processing}]),onClick:o.updateApiToken,disabled:o.updateApiTokenForm.processing},{default:t(()=>[...e[20]||(e[20]=[i(" Save ",-1)])]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),n(S,{show:o.apiTokenBeingDeleted,onClose:e[8]||(e[8]=s=>o.apiTokenBeingDeleted=null)},{title:t(()=>[...e[21]||(e[21]=[i(" Delete API Token ",-1)])]),content:t(()=>[...e[22]||(e[22]=[i(" Are you sure you would like to delete this API token? ",-1)])]),footer:t(()=>[n(k,{onClick:e[7]||(e[7]=s=>o.apiTokenBeingDeleted=null)},{default:t(()=>[...e[23]||(e[23]=[i(" Cancel ",-1)])]),_:1}),n(_,{class:g(["ml-3",{"opacity-25":o.deleteApiTokenForm.processing}]),onClick:o.deleteApiToken,disabled:o.deleteApiTokenForm.processing},{default:t(()=>[...e[24]||(e[24]=[i(" Delete ",-1)])]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}const Se=Y(G,[["render",le]]);export{Se as default};
