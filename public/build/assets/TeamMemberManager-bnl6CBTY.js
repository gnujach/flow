import{J as $}from"./ActionMessage-B-Ztyjv3.js";import{J as B}from"./Modal-DqQiNYOK.js";import{J as S}from"./Button-DYi5d6FP.js";import{J as L}from"./ConfirmationModal-CuO7jSdR.js";import{J as A}from"./DangerButton-CXGNpOgL.js";import{J as P}from"./DialogModal-DK6pd8Sm.js";import{J as z}from"./FormSection-DQMytoRC.js";import{J as V}from"./Input-BI_iGO1Y.js";import{J as _}from"./InputError-U-lskrRX.js";import{J as I}from"./Label-_b3VnWKN.js";import{J as N}from"./SecondaryButton-DDAPIt3K.js";import{J as D}from"./SectionBorder-D4ojhM8v.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{d as O,r as m,e as a,o as l,f as d,b as r,w as s,g as i,n as p,a as n,F as v,h as g,t as b}from"./app-CArJwsA3.js";import"./SectionTitle-DbZK12cy.js";const U=O({components:{JetActionMessage:$,JetActionSection:B,JetButton:S,JetConfirmationModal:L,JetDangerButton:A,JetDialogModal:P,JetFormSection:z,JetInput:V,JetInputError:_,JetLabel:I,JetSecondaryButton:N,JetSectionBorder:D},props:["team","availableRoles","userPermissions"],data(){return{addTeamMemberForm:this.$inertia.form({email:"",role:null}),updateRoleForm:this.$inertia.form({role:null}),leaveTeamForm:this.$inertia.form(),removeTeamMemberForm:this.$inertia.form(),currentlyManagingRole:!1,managingRoleFor:null,confirmingLeavingTeam:!1,teamMemberBeingRemoved:null}},methods:{addTeamMember(){this.addTeamMemberForm.post(route("team-members.store",this.team),{errorBag:"addTeamMember",preserveScroll:!0,onSuccess:()=>this.addTeamMemberForm.reset()})},cancelTeamInvitation(e){this.$inertia.delete(route("team-invitations.destroy",e),{preserveScroll:!0})},manageRole(e){this.managingRoleFor=e,this.updateRoleForm.role=e.membership.role,this.currentlyManagingRole=!0},updateRole(){this.updateRoleForm.put(route("team-members.update",[this.team,this.managingRoleFor]),{preserveScroll:!0,onSuccess:()=>this.currentlyManagingRole=!1})},confirmLeavingTeam(){this.confirmingLeavingTeam=!0},leaveTeam(){this.leaveTeamForm.delete(route("team-members.destroy",[this.team,this.$page.props.user]))},confirmTeamMemberRemoval(e){this.teamMemberBeingRemoved=e},removeTeamMember(){this.removeTeamMemberForm.delete(route("team-members.destroy",[this.team,this.teamMemberBeingRemoved]),{errorBag:"removeTeamMember",preserveScroll:!0,preserveState:!0,onSuccess:()=>this.teamMemberBeingRemoved=null})},displayableRole(e){return this.availableRoles.find(o=>o.key===e).name}}}),q={key:0},G={class:"col-span-6 sm:col-span-4"},H={key:0,class:"col-span-6 lg:col-span-4"},K={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},Q=["onClick"],W={class:"flex items-center"},X={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},Y={class:"mt-2 text-xs text-gray-600 text-left"},Z={key:1},x={class:"space-y-6"},ee={class:"text-gray-600"},oe={class:"flex items-center"},te=["onClick"],se={key:2},ne={class:"space-y-6"},re={class:"flex items-center"},ae=["src","alt"],le={class:"ml-4"},ie={class:"flex items-center"},me=["onClick"],de={key:1,class:"ml-2 text-sm text-gray-400"},ue=["onClick"],pe={key:0},be={class:"relative z-0 mt-1 border border-gray-200 rounded-lg cursor-pointer"},ve=["onClick"],ge={class:"flex items-center"},fe={key:0,class:"ml-2 h-5 w-5 text-green-400",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",stroke:"currentColor",viewBox:"0 0 24 24"},ce={class:"mt-2 text-xs text-gray-600"};function ye(e,o,ke,Te,Me,Re){const f=m("jet-section-border"),y=m("jet-label"),h=m("jet-input"),k=m("jet-input-error"),C=m("jet-action-message"),T=m("jet-button"),j=m("jet-form-section"),M=m("jet-action-section"),c=m("jet-secondary-button"),w=m("jet-dialog-modal"),R=m("jet-danger-button"),F=m("jet-confirmation-modal");return l(),a("div",null,[e.userPermissions.canAddTeamMembers?(l(),a("div",q,[r(f),r(j,{onSubmitted:e.addTeamMember},{title:s(()=>[...o[8]||(o[8]=[i(" Add Team Member ",-1)])]),description:s(()=>[...o[9]||(o[9]=[i(" Add a new team member to your team, allowing them to collaborate with you. ",-1)])]),form:s(()=>[o[11]||(o[11]=n("div",{class:"col-span-6"},[n("div",{class:"max-w-xl text-sm text-gray-600"}," Please provide the email address of the person you would like to add to this team. ")],-1)),n("div",G,[r(y,{for:"email",value:"Email"}),r(h,{id:"email",type:"email",class:"mt-1 block w-full",modelValue:e.addTeamMemberForm.email,"onUpdate:modelValue":o[0]||(o[0]=t=>e.addTeamMemberForm.email=t)},null,8,["modelValue"]),r(k,{message:e.addTeamMemberForm.errors.email,class:"mt-2"},null,8,["message"])]),e.availableRoles.length>0?(l(),a("div",H,[r(y,{for:"roles",value:"Role"}),r(k,{message:e.addTeamMemberForm.errors.role,class:"mt-2"},null,8,["message"]),n("div",K,[(l(!0),a(v,null,g(e.availableRoles,(t,u)=>(l(),a("button",{type:"button",class:p(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":u>0,"rounded-b-none":u!=Object.keys(e.availableRoles).length-1}]),onClick:J=>e.addTeamMemberForm.role=t.key,key:t.key},[n("div",{class:p({"opacity-50":e.addTeamMemberForm.role&&e.addTeamMemberForm.role!=t.key})},[n("div",W,[n("div",{class:p(["text-sm text-gray-600",{"font-semibold":e.addTeamMemberForm.role==t.key}])},b(t.name),3),e.addTeamMemberForm.role==t.key?(l(),a("svg",X,[...o[10]||(o[10]=[n("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):d("",!0)]),n("div",Y,b(t.description),1)],2)],10,Q))),128))])])):d("",!0)]),actions:s(()=>[r(C,{on:e.addTeamMemberForm.recentlySuccessful,class:"mr-3"},{default:s(()=>[...o[12]||(o[12]=[i(" Added. ",-1)])]),_:1},8,["on"]),r(T,{class:p({"opacity-25":e.addTeamMemberForm.processing}),disabled:e.addTeamMemberForm.processing},{default:s(()=>[...o[13]||(o[13]=[i(" Add ",-1)])]),_:1},8,["class","disabled"])]),_:1},8,["onSubmitted"])])):d("",!0),e.team.team_invitations.length>0&&e.userPermissions.canAddTeamMembers?(l(),a("div",Z,[r(f),r(M,{class:"mt-10 sm:mt-0"},{title:s(()=>[...o[14]||(o[14]=[i(" Pending Team Invitations ",-1)])]),description:s(()=>[...o[15]||(o[15]=[i(" These people have been invited to your team and have been sent an invitation email. They may join the team by accepting the email invitation. ",-1)])]),content:s(()=>[n("div",x,[(l(!0),a(v,null,g(e.team.team_invitations,t=>(l(),a("div",{class:"flex items-center justify-between",key:t.id},[n("div",ee,b(t.email),1),n("div",oe,[e.userPermissions.canRemoveTeamMembers?(l(),a("button",{key:0,class:"cursor-pointer ml-6 text-sm text-red-500 focus:outline-none",onClick:u=>e.cancelTeamInvitation(t)}," Cancel ",8,te)):d("",!0)])]))),128))])]),_:1})])):d("",!0),e.team.users.length>0?(l(),a("div",se,[r(f),r(M,{class:"mt-10 sm:mt-0"},{title:s(()=>[...o[16]||(o[16]=[i(" Team Members ",-1)])]),description:s(()=>[...o[17]||(o[17]=[i(" All of the people that are part of this team. ",-1)])]),content:s(()=>[n("div",ne,[(l(!0),a(v,null,g(e.team.users,t=>(l(),a("div",{class:"flex items-center justify-between",key:t.id},[n("div",re,[n("img",{class:"w-8 h-8 rounded-full",src:t.profile_photo_url,alt:t.name},null,8,ae),n("div",le,b(t.name),1)]),n("div",ie,[e.userPermissions.canAddTeamMembers&&e.availableRoles.length?(l(),a("button",{key:0,class:"ml-2 text-sm text-gray-400 underline",onClick:u=>e.manageRole(t)},b(e.displayableRole(t.membership.role)),9,me)):e.availableRoles.length?(l(),a("div",de,b(e.displayableRole(t.membership.role)),1)):d("",!0),e.$page.props.user.id===t.id?(l(),a("button",{key:2,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:o[1]||(o[1]=(...u)=>e.confirmLeavingTeam&&e.confirmLeavingTeam(...u))}," Leave ")):d("",!0),e.userPermissions.canRemoveTeamMembers?(l(),a("button",{key:3,class:"cursor-pointer ml-6 text-sm text-red-500",onClick:u=>e.confirmTeamMemberRemoval(t)}," Remove ",8,ue)):d("",!0)])]))),128))])]),_:1})])):d("",!0),r(w,{show:e.currentlyManagingRole,onClose:o[3]||(o[3]=t=>e.currentlyManagingRole=!1)},{title:s(()=>[...o[18]||(o[18]=[i(" Manage Role ",-1)])]),content:s(()=>[e.managingRoleFor?(l(),a("div",pe,[n("div",be,[(l(!0),a(v,null,g(e.availableRoles,(t,u)=>(l(),a("button",{type:"button",class:p(["relative px-4 py-3 inline-flex w-full rounded-lg focus:z-10 focus:outline-none focus:border-blue-300 focus:ring focus:ring-blue-200",{"border-t border-gray-200 rounded-t-none":u>0,"rounded-b-none":u!==Object.keys(e.availableRoles).length-1}]),onClick:J=>e.updateRoleForm.role=t.key,key:t.key},[n("div",{class:p({"opacity-50":e.updateRoleForm.role&&e.updateRoleForm.role!==t.key})},[n("div",ge,[n("div",{class:p(["text-sm text-gray-600",{"font-semibold":e.updateRoleForm.role===t.key}])},b(t.name),3),e.updateRoleForm.role===t.key?(l(),a("svg",fe,[...o[19]||(o[19]=[n("path",{d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)])])):d("",!0)]),n("div",ce,b(t.description),1)],2)],10,ve))),128))])])):d("",!0)]),footer:s(()=>[r(c,{onClick:o[2]||(o[2]=t=>e.currentlyManagingRole=!1)},{default:s(()=>[...o[20]||(o[20]=[i(" Cancel ",-1)])]),_:1}),r(T,{class:p(["ml-3",{"opacity-25":e.updateRoleForm.processing}]),onClick:e.updateRole,disabled:e.updateRoleForm.processing},{default:s(()=>[...o[21]||(o[21]=[i(" Save ",-1)])]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),r(F,{show:e.confirmingLeavingTeam,onClose:o[5]||(o[5]=t=>e.confirmingLeavingTeam=!1)},{title:s(()=>[...o[22]||(o[22]=[i(" Leave Team ",-1)])]),content:s(()=>[...o[23]||(o[23]=[i(" Are you sure you would like to leave this team? ",-1)])]),footer:s(()=>[r(c,{onClick:o[4]||(o[4]=t=>e.confirmingLeavingTeam=!1)},{default:s(()=>[...o[24]||(o[24]=[i(" Cancel ",-1)])]),_:1}),r(R,{class:p(["ml-3",{"opacity-25":e.leaveTeamForm.processing}]),onClick:e.leaveTeam,disabled:e.leaveTeamForm.processing},{default:s(()=>[...o[25]||(o[25]=[i(" Leave ",-1)])]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"]),r(F,{show:e.teamMemberBeingRemoved,onClose:o[7]||(o[7]=t=>e.teamMemberBeingRemoved=null)},{title:s(()=>[...o[26]||(o[26]=[i(" Remove Team Member ",-1)])]),content:s(()=>[...o[27]||(o[27]=[i(" Are you sure you would like to remove this person from the team? ",-1)])]),footer:s(()=>[r(c,{onClick:o[6]||(o[6]=t=>e.teamMemberBeingRemoved=null)},{default:s(()=>[...o[28]||(o[28]=[i(" Cancel ",-1)])]),_:1}),r(R,{class:p(["ml-3",{"opacity-25":e.removeTeamMemberForm.processing}]),onClick:e.removeTeamMember,disabled:e.removeTeamMemberForm.processing},{default:s(()=>[...o[29]||(o[29]=[i(" Remove ",-1)])]),_:1},8,["onClick","class","disabled"])]),_:1},8,["show"])])}const Ie=E(U,[["render",ye]]);export{Ie as default};
