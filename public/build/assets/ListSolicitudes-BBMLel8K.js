import{I as S,A as M}from"./AppLayout-DvZhDYGv.js";import{J as k}from"./NavLink-C3AtBab6.js";import{P as N}from"./Pagination-BeRPbXgi.js";import{e as r,o,a as e,q as B,v,b as i,m as c,p as V,w as f,t as p,F as q,h as A,n as $,f as h,x as C,s as E,c as _}from"./app-CArJwsA3.js";import{r as U}from"./PencilIcon-C1YvNYww.js";import{r as z}from"./CheckIcon-Bv2vgbRO.js";import{Y as L,h as j,_ as O,S as P}from"./transition-DvF6H_Oy.js";import{_ as R,V as T}from"./vue-good-table-next-DLrfPYCR.js";import"./ResponsiveNavLink-Re4XPsQJ.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./keyboard-DJJQ75-z.js";import"./use-resolve-button-type-ty-xYOe2.js";import"./open-closed-B45GE6EM.js";function D(b,x){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"fill-rule":"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v16.19l6.22-6.22a.75.75 0 1 1 1.06 1.06l-7.5 7.5a.75.75 0 0 1-1.06 0l-7.5-7.5a.75.75 0 1 1 1.06-1.06l6.22 6.22V3a.75.75 0 0 1 .75-.75Z","clip-rule":"evenodd"})])}function F(b,x){return o(),r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m.75 12 3 3m0 0 3-3m-3 3v-6m-1.5-9H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})])}const H={class:"flex items-center justify-center"},I={class:"flex flex-col overflow-hidden w-full max-w-2xl bg-white rounded-lg mx-4 max-h-[80vh] mt-[10vh] relative"},J={class:"flex flex-row justify-between items-center border-b border-gray-300"},Y={class:"inset-y-0 left-0 flex items-center pl-4 pointer-events-none"},Z={class:"mb-2 text-lg font-bold uppercase"},G={class:"overflow-auto"},K={class:"px-4 py-16 mx-auto sm:max-w-xl md:max-w-full lg:max-w-screen-xl md:px-24 lg:px-8 lg:py-10"},Q={class:"grid gap-4 row-gap-4 lg:grid-cols-2"},W={class:"lg:py-6 lg:pr-16"},X={class:"flex flex-col items-center mr-4"},ee={class:"pt-1 pb-8 flex flex-row justify-around"},te=["onClick"],se={class:"flex"},oe={class:"flex flex-col items-center mr-4"},ae={class:"flex items-center justify-center w-10 h-10 border rounded-full"},le={class:"pt-1 flex justify-between"},ie={class:"relative"},re={class:"grid grid-rows-2 grid-cols-1"},de={key:0,class:"uppercase indent-2 text-lg text-gray-600 italic"},ne={key:1,class:"uppercase indent-2 text-lg text-gray-600 italic"},ce={__name:"ModalUpdateSolicitud",props:{uuid:{type:Number,required:!0}},setup(b){const x=B(),u=v(!1),d=v(null),s=v(0),l=v({task_id:100,concluido:!1}),a=async m=>{try{const t=await C.get(`/solicitudes/${m}/edit`);d.value=t.data,s.value=d.value.historysolicitud[d.value.historysolicitud.length-1]}catch(t){console.log(t)}u.value=!0},g=async(m,t,n)=>{l.value.task_id=t,l.value.concluido=n,u.value=!1;try{await C.put(`/solicitudes/${m}/update/`,{data:l.value,_method:"put"}),x.dispatch("solicitudesStore/openModalUpdateRequest")}catch(y){console.log(y)}},w=()=>{u.value=!1};return(m,t)=>(o(),r("div",H,[e("button",V(m.$attrs,{type:"button",onClick:t[0]||(t[0]=n=>a(b.uuid)),class:"flex items-center space-x-2 border border-gray-300 shadow-sm px-3 py-1.5 hover:border-gray-600 focus:outline-none focus:border-gray-600 rounded-lg"}),[i(c(U),{class:"flex-none text-blue-800 ml-1 w-5 h-5","aria-hidden":"true"})],16),i(c(P),{show:u.value,as:"template"},{default:f(()=>[i(c(L),{open:u.value,onClose:w,class:"fixed inset-0 z-50 flex justify-center items-start"},{default:f(()=>[i(c(j),{enter:"duration-200 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",as:"template"},{default:f(()=>[i(c(O),{class:"fixed inset-0 bg-black bg-opacity-75"})]),_:1}),i(c(j),{as:"template",enter:"duration-200 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:f(()=>[e("div",I,[e("div",J,[e("div",Y,[e("p",Z,p(d.value.cliente.full_name)+"/ "+p(d.value.tramite.nombre),1)]),e("div",{class:"inset-y-0 right-0 flex items-center pr-3 my-2"},[e("button",{onClick:w,type:"button",class:"flex items-center p-1.5 uppercase font-semibold tracking-wider text-gray-700 rounded-md border border-gray-200 focus:outline-none focus:border-gray-300 text-xxs"}," Esc ")])]),e("div",G,[e("div",K,[e("div",Q,[e("div",W,[(o(!0),r(q,null,A(d.value.tramite.tareastramite,n=>(o(),r("div",{class:"flex",key:n.id},[e("div",X,[e("div",null,[e("div",{class:$(["flex items-center justify-center w-10 h-10 border rounded-full",[n.id<=s.value.task_id?"bg-gray-400":""]])},[i(c(D),{class:"h-5 w-5"})],2)]),t[2]||(t[2]=e("div",{class:"w-px h-full bg-gray-300"},null,-1))]),e("div",ee,[e("p",{class:$(["mb-2 text-lg font-bold",[n.id<=s.value.task_id?"line-through text-gray-300":""]])},p(n.nombre),3),n.id>s.value.task_id?(o(),r("button",{key:0,onClick:y=>g(d.value.id,n.id,!1)},[...t[3]||(t[3]=[e("strong",{class:"border text-blue-500 border-current uppercase px-2 py-1.5 rounded-full text-[7px] tracking-wide hover:bg-blue-900 hover:text-white"}," Completada ",-1)])],8,te)):h("",!0)])]))),128)),e("div",se,[e("div",oe,[e("div",null,[e("div",ae,[i(c(z),{class:"h-5 w-5"})])])]),e("div",le,[t[5]||(t[5]=e("p",{class:"mb-2 text-lg font-bold"},"Trámite Concluído",-1)),e("button",{onClick:t[1]||(t[1]=n=>g(d.value.id,m.id=100,m.concluida=!0))},[...t[4]||(t[4]=[e("strong",{class:"border text-blue-500 border-current uppercase px-2 py-1.5 rounded-full text-[7px] tracking-wide hover:bg-blue-900 hover:text-white"}," Completada ",-1)])])])])]),e("div",ie,[e("div",re,[t[6]||(t[6]=e("div",{class:"border-b border-blue-500"},[e("h3",{class:"text-center"}," Observaciones")],-1)),e("div",null,[d.value.nota?(o(),r("p",de,p(d.value.nota),1)):(o(),r("p",ne,"No se tienen observaciones"))])])])])])])])]),_:1})]),_:1},8,["open"])]),_:1},8,["show"])]))}},ue={class:"py-12"},fe={class:"max-w-full mx-auto sm:px-6 lg:px-8"},me={class:"overflow-hidden shadow-xl sm:rounded-lg"},pe={class:"p-6 sm:px-20 bg-white border-b border-gray-200"},be={class:"mt-8 flex flex-row m-2 justify-between"},ve={class:"flex flex-row justify-end pb-4"},xe={class:"flex justify-end"},_e={class:"border-green-700 border bg-white rounded mr-4 w-32 mb:w-42 p-1 hover:bg-aqua transition duration-500"},he={class:"flex flex-row"},ge={class:"flex justify-center"},we={href:"/solicitudes/export/"},ye={class:"border-green-700 border bg-white rounded mr-4 w-32 mb:w-42 p-1 hover:bg-aqua transition duration-500"},ke={class:"flex flex-row justify-between"},$e={class:"font-bold text-blue-500 hover:underline capitalize"},Ce={key:1,class:"p-1.5 text-xs font-thin text-green-800 bg-green-200 rounded-lg bg-opacity-50 truncate"},je={key:2},Se={key:3},Me={key:0},Ne={key:1},Be={key:4},Ve={class:"max-w-3xl mx-auto sm:px-6 lg:px-8 pt-4"},Ie={__name:"ListSolicitudes",props:{solicitudes:Object},setup(b){const x=b,u=v([]);E(()=>{x.solicitudes.data.solicitudes.forEach(s=>{let l={id:s.data.id,user:s.data.user.data.attributes.name,created_at:s.data.attributes.created,cliente:s.data.cliente.data.attributes.full_name,cliente_uuid:s.data.cliente.data.uuid,tramite:s.data.tramite.data.attributes.nombre,departamento:s.data.tramite.data.departamento.data.attributes.nombre,m_atencion:s.data.medio.data.attributes.nombre,concluida:s.data.attributes.concluido};u.value.push(l)})});const d=v([{label:"Realizado",field:"created_at"},{label:"Atendió",field:"user"},{label:"Usuario",field:"cliente"},{label:"Departamento",field:"departamento"},{label:"Trámite",field:"tramite"},{label:"Medio de atención",field:"m_atencion"},{label:"Concluída",field:"concluida"},{label:"Acciones",field:"acciones",sortable:!1}]);return(s,l)=>(o(),_(M,null,{header:f(()=>[l[3]||(l[3]=e("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Solicitudes ",-1)),e("div",ue,[e("div",fe,[e("div",me,[e("div",pe,[i(R),e("div",be,[l[2]||(l[2]=e("p",{class:"text-2xl ml-4 w-1/2"}," Solicitudes por usuario ",-1)),e("div",ve,[e("div",xe,[i(k,{href:s.route("solicitudes",{})},{default:f(()=>[e("button",_e,[e("div",he,[i(S,{name:"plus",class:"block w-6 h-6 fill-gray-400"}),l[0]||(l[0]=e("p",{class:"font-bold"}," Nueva Solicitud ",-1))])])]),_:1},8,["href"])]),e("div",ge,[e("a",we,[e("button",ye,[e("div",ke,[i(c(F),{class:"h-5 w-5"}),l[1]||(l[1]=e("p",{class:"font-bold"}," Excel ",-1))])])])])])]),e("div",null,[i(c(T),{columns:d.value,rows:u.value,"search-options":{enabled:!0,placeholder:"Buscar en tabla"}},{"table-row":f(a=>[a.column.field=="cliente"?(o(),_(k,{key:0,href:s.route("admin.clientes/show",{cliente:a.row.cliente_uuid})},{default:f(()=>[e("p",$e,p(a.row.cliente),1)]),_:2},1032,["href"])):a.column.field=="m_atencion"?(o(),r("span",Ce,p(a.row.m_atencion),1)):a.column.field=="acciones"?(o(),r("div",je,[a.row.concluida==!1?(o(),_(ce,{key:0,uuid:a.row.id},null,8,["uuid"])):h("",!0)])):a.column.field=="concluida"?(o(),r("div",Se,[a.row.concluida==!1?(o(),r("span",Me," No ")):a.row.concluida==!0?(o(),r("span",Ne," Si ")):h("",!0)])):(o(),r("span",Be,p(a.formattedRow[a.column.field]),1))]),_:1},8,["columns","rows"])]),e("div",Ve,[i(N,{meta:b.solicitudes.meta},null,8,["meta"])])])])])])]),_:1}))}};export{Ie as default};
